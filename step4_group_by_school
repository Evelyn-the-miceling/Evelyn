from step1_group_by_tut import *
gender_subgroup = readfile()

person = ("G-1", "5002","CCDS", "Male", "4.02")
people = [[person]]

stem = ["CCDS", "EEE", "WKW SCI", " MAE", "SPMS","LKCMedicine", "SBS", "CCEB", "CoE", "MSE" ]
non_stem = ["CoB (NBS)", "NIE", "ADM", "SoH", "SSS", "ASE"]

def pop_one_stem_one_nonstem(gender_subgroup):
    """
    Pops (removes) one STEM and one non-STEM student
    from a gender subgroup (list of dicts).
    """
    team = []

    # We make a copy of the list for safe iteration
    #for i, student in enumerate(gender_subgroup[:]):
        school = student["school"].strip()  # remove extra spaces if any

        # pick one from STEM if not already picked
        if school in stem and not any(s["school"].strip() in stem for s in team):
            team.append(gender_subgroup.pop(i))
        
        # pick one from non-STEM if not already picked
        elif school in non_stem and not any(s["school"].strip() in non_stem for s in team):
            team.append(gender_subgroup.pop(i))
        
        # stop once we have one of each
        if len(team) == 2:
            break

    return team

for i in gender_subgroup:
        school = student["school"].strip()  # remove extra spaces if any

        # pick one from STEM if not already picked
        if school in stem and not any(s["school"].strip() in stem for s in team):
            team.append(gender_subgroup.pop(i))
        
        # pick one from non-STEM if not already picked
        elif school in non_stem and not any(s["school"].strip() in non_stem for s in team):
            team.append(gender_subgroup.pop(i))
        
        # stop once we have one of each
        if len(team) == 2:
            break

    return team

print (pop_one_stem_one_nonstem(gender_subgroup))